var n=document.createElement("canvas"),a=n.width=.75*window.innerWidth,r=n.height=.75*window.innerHeight;document.body.appendChild(n);for(var t=n.getContext("webgl"),e={x:0,y:0},o=[],i=0;i<30;i++){var l=60*Math.random()+10;o.push({x:Math.random()*(a-2*l)+l,y:Math.random()*(r-2*l)+l,vx:3*(Math.random()-.5),vy:3*(Math.random()-.5),r:.75*l})}var d="\nprecision highp float;\n\nconst float WIDTH = "+(a>>0)+".0;\nconst float HEIGHT = "+(r>>0)+".0;\n\nuniform vec3 metaballs[30];\n\nvoid main(){\nfloat x = gl_FragCoord.x;\nfloat y = gl_FragCoord.y;\n\nfloat sum = 0.0;\nfor (int i = 0; i < 30; i++) {\nvec3 metaball = metaballs[i];\nfloat dx = metaball.x - x;\nfloat dy = metaball.y - y;\nfloat radius = metaball.z;\n\nsum += (radius * radius) / (dx * dx + dy * dy);\n}\n\nif (sum >= 0.99) {\ngl_FragColor = vec4(mix(vec3(x / WIDTH, y / HEIGHT, 1.0), vec3(0, 0, 0), max(0.0, 1.0 - (sum - 0.99) * 100.0)), 1.0);\nreturn;\n}\n\ngl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n\n",f=y("\nattribute vec2 position;\n\nvoid main() {\n// position specifies only x and y.\n// We set z to be 0.0, and w to be 1.0\ngl_Position = vec4(position, 0.0, 1.0);\n}\n",t.VERTEX_SHADER),m=y(d,t.FRAGMENT_SHADER),v=t.createProgram();t.attachShader(v,f),t.attachShader(v,m),t.linkProgram(v),t.useProgram(v);var c=new Float32Array([-1,1,-1,-1,1,1,1,-1]),u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,c,t.STATIC_DRAW);var h=function(n,a){var r=t.getAttribLocation(n,a);if(-1===r)throw"Can not find attribute "+a+".";return r}(v,"position");t.enableVertexAttribArray(h),t.vertexAttribPointer(h,2,t.FLOAT,t.FALSE,8,0);var s=function(n,a){var r=t.getUniformLocation(n,a);if(-1===r)throw"Can not find uniform "+a+".";return r}(v,"metaballs");function y(n,a){var r=t.createShader(a);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw"Shader compile failed with: "+t.getShaderInfoLog(r);return r}!function n(){for(var e=0;e<30;e++){var i=o[e];i.x+=i.vx,i.y+=i.vy,(i.x<i.r||i.x>a-i.r)&&(i.vx*=-1),(i.y<i.r||i.y>r-i.r)&&(i.vy*=-1)}var l=new Float32Array(90);for(e=0;e<30;e++){var d=3*e,f=o[e];l[d+0]=f.x,l[d+1]=f.y,l[d+2]=f.r}t.uniform3fv(s,l),t.drawArrays(t.TRIANGLE_STRIP,0,4),requestAnimationFrame(n)}(),n.onmousemove=function(n){e.x=n.clientX,e.y=n.clientY};
//# sourceMappingURL=index.177c4f20.js.map
