!function(){var n=document.createElement("canvas"),a=n.width=.75*window.innerWidth,r=n.height=.75*window.innerHeight;document.body.appendChild(n);for(var t=n.getContext("webgl"),e={x:0,y:0},o=30,i=[],l=0;l<o;l++){var d=60*Math.random()+10;i.push({x:Math.random()*(a-2*d)+d,y:Math.random()*(r-2*d)+d,vx:3*(Math.random()-.5),vy:3*(Math.random()-.5),r:.75*d})}var f="\nprecision highp float;\n\nconst float WIDTH = "+(a>>0)+".0;\nconst float HEIGHT = "+(r>>0)+".0;\n\nuniform vec3 metaballs["+"30];\n\nvoid main(){\nfloat x = gl_FragCoord.x;\nfloat y = gl_FragCoord.y;\n\nfloat sum = 0.0;\nfor (int i = 0; i < "+"30; i++) {\nvec3 metaball = metaballs[i];\nfloat dx = metaball.x - x;\nfloat dy = metaball.y - y;\nfloat radius = metaball.z;\n\nsum += (radius * radius) / (dx * dx + dy * dy);\n}\n\nif (sum >= 0.99) {\ngl_FragColor = vec4(mix(vec3(x / WIDTH, y / HEIGHT, 1.0), vec3(0, 0, 0), max(0.0, 1.0 - (sum - 0.99) * 100.0)), 1.0);\nreturn;\n}\n\ngl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n\n",m=x("\nattribute vec2 position;\n\nvoid main() {\n// position specifies only x and y.\n// We set z to be 0.0, and w to be 1.0\ngl_Position = vec4(position, 0.0, 1.0);\n}\n",t.VERTEX_SHADER),c=x(f,t.FRAGMENT_SHADER),v=t.createProgram();t.attachShader(v,m),t.attachShader(v,c),t.linkProgram(v),t.useProgram(v);var u=new Float32Array([-1,1,-1,-1,1,1,1,-1]),h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW);var s=function(n,a){var r=t.getAttribLocation(n,a);if(-1===r)throw"Can not find attribute "+a+".";return r}(v,"position");t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,t.FALSE,8,0);var y=function(n,a){var r=t.getUniformLocation(n,a);if(-1===r)throw"Can not find uniform "+a+".";return r}(v,"metaballs");function x(n,a){var r=t.createShader(a);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw"Shader compile failed with: "+t.getShaderInfoLog(r);return r}!function n(){for(var e=0;e<o;e++){var l=i[e];l.x+=l.vx,l.y+=l.vy,(l.x<l.r||l.x>a-l.r)&&(l.vx*=-1),(l.y<l.r||l.y>r-l.r)&&(l.vy*=-1)}var d=new Float32Array(90);for(e=0;e<o;e++){var f=3*e,m=i[e];d[f+0]=m.x,d[f+1]=m.y,d[f+2]=m.r}t.uniform3fv(y,d),t.drawArrays(t.TRIANGLE_STRIP,0,4),requestAnimationFrame(n)}(),n.onmousemove=function(n){e.x=n.clientX,e.y=n.clientY}}();
//# sourceMappingURL=index.749adcf8.js.map
